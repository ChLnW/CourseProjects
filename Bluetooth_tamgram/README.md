# COMP4560_Artefact

This repo contains the artefacts of *Changling Wang*'s (*u7079205*) COMP4560 project, on __Tamgram-based formalization of Bluetooth__.

## Environment Configuration

### Tamgram

By default, *Tamgram* files are indicated by the suffix "__*.tg*__". However, this is only indicative and you are free to name your *Tamgram* files however you like. Nonetheless, all the *Tamgram* files in this repo end with their names with *__.tg__*.

You can find the latest version of Tamgram [here](https://github.com/tamgram/tamgram/releases). Feel free to choose between using the pre-compiled executable or building from source.

Several scripts are provided in this repo to facilitate the usage of Tamgram (and Tamarin), however, they assumes the executable of Tamgram can be found at __*~/tamgram/tamgram*__.

All the files in this repo have been *tested* with Tamgram __v0.5.6__. (By *test* I mean the files can be compiled by Tamgram and the generated files passes *Tamarin*'s syntax check)

### Tamarin

*Tamarin* files are usually indicated by the suffix "__*.spthy*__", which is the case for all Tamarin files in this repo.

Please refer to [here](https://tamarin-prover.github.io/) for Tamarin's __installation instructions__.

## Cross-Transport Key Derivation 

This refers to the first model we built, which didn't terminate after spending 2h proving the __lemma Confidentiality__ defined at the bottom of *__./cross-transport-key-derivation/br.tg__*. 

As the directory name suggests, all the related files are in [*__./cross-transport-key-derivation__*](./cross-transport-key-derivation/), including the Tamgram files as well as the corresponding Tamarin files generated by Tamgram.

You can use the script *__tamgram.sh__* to compile the Tamgram files from scratch and invoke Tamarin to prove the generated file. For example:
```
./tamgram.sh ./cross-transport-key-derivation/br.tg
```

Alternatively, you can take a look at the script (which is __extremely simple__), and see how to invoke Tamgram and Tamarin by yourself.

## IRK Theft/Leakage

This refers to the simplified model tailored for analyzing IRK Theft/Leakage, which generated the results discussed in the [report](./u7079205_Report.pdf).

As the directory name suggests, all the related files are in [*__./irk-theft__*](./irk-theft/), including the Tamgram files ([smp.tg](./irk-theft/smp.tg) for BLE model and [br.tg](./irk-theft/br.tg) for BR/EDR model), the output generation script ([gen.py](./irk-theft/gen.py)), the output extraction script ([extract.py](./irk-theft/extract.py)) and the outputs I generated for writing reports. 

To use [extract.py](./irk-theft/extract.py):
```
python3 extract.py smp.tg.outs (or br.tg.outs)
```

To use [gen.py](./irk-theft/gen.py), you will need to set the value of src defined at the begining of the file to the name of the target file before executing in terminal:
```
python3 gen.py
```

The Python version I used was *Python 3.11.4*, but I expect the scripts to work with any version of Python3.

## Notes

For reference, [Notes.txt](./Notes.txt) contains all the notes I made while reading the specification and building the model.